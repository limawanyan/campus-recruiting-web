(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/details"],{"0233":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uAvatar:function(){return n.e("uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"a827"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"d19b"))},mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/mp-html/components/mp-html/mp-html")]).then(n.bind(null,"450a"))},comment:function(){return n.e("components/comment/comment").then(n.bind(null,"d8b8"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"8eda"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.timeFormat(t.postInfo.createdAt));t.$mp.data=Object.assign({},{$root:{m0:n}})},a=[]},2838:function(t,e,n){"use strict";n.r(e);var o=n("62e3"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},5158:function(t,e,n){},"62e3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,o,i,a,s){try{var r=t[a](s),u=r.value}catch(c){return void n(c)}r.done?e(u):Promise.resolve(u).then(o,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){a(s,o,i,r,u,"next",t)}function u(t){a(s,o,i,r,u,"throw",t)}r(void 0)}))}}var r={data:function(){return{postInfo:{},follow:!0,advert:[],videoAds:!1,isVideoAds:!1,user:"",count:0,detail:[],topshow:!0,placeholder:"写评论...",commentList:[],page:0,pageSize:10,total:0,repley_content:"",isLike:!1,isFav:!1,isComments:!1,favourSum:0,isInput:!1,isPublish:!1,isNewest:!0,tagStyle:{img:"width:100%;display:block;",table:"width:100%",video:"width:100%",p:"padding-top:20rpx",button:"border-width: 2rpx;border-color: #5b96fe;border-style: solid;border-radius: calc((50rpx - 4rpx) / 2);font-size: 26rpx;background-color: #5b96fe;display: flex;color: #fff;align-items: center;justify-content:center;padding:20rpx 40rpx;margin:20rpx auto;"}}},onLoad:function(t){var e=this;return s(o.default.mark((function n(){var i,a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$u.api.getPostInfoDetail({postId:t.id});case 2:return i=n.sent,e.postInfo=i.data,i.data.user.isFocus,n.next=7,e.$u.api.getPostInfoComment({postId:t.id,page:e.page,pageSize:e.pageSize});case 7:a=n.sent,e.commentList=a.data,e.page=a.page,e.pageSize=a.pageSize,e.total=a.total,e.user=e.vuex_user;case 13:case"end":return n.stop()}}),n)})))()},methods:{tapFollow:function(){var e=s(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(),""!=this.user){e.next=5;break}t.navigateTo({url:"/pages/center/login"}),e.next=11;break;case 5:return e.next=7,this.$u.api.followUser({userId:this.postInfo.user.id});case 7:n=e.sent,n.isFollow?t.showToast({title:"关注成功",duration:1e3}):t.showToast({title:"取消关注",duration:1e3}),this.postInfo.user.isFocus=n.isFollow,console.log(n);case 11:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),timeFormat:function(t){return this.$u.utils.getDateDiff(t)},reply:function(t){console.log(t);var e=t.data.id,n=t.data.author.name;this.isFocus=!0,this.isComments=!0,this.parent=e,this.placeholder=" @"+n+":"},tapcommentLike:function(t){},tapLike:function(){var e=s(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.user){e.next=4;break}t.navigateTo({url:"/pages/center/login"}),e.next=9;break;case 4:return e.next=6,this.$u.api.likePostInfo({postId:this.postInfo.id,type:1});case 6:n=e.sent,n.isLike?t.showToast({title:"点赞成功",duration:1e3}):t.showToast({title:"取消点赞",duration:1e3}),this.postInfo.isLike=n.isLike;case 9:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),tapFav:function(){var e=s(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.user){e.next=4;break}t.navigateTo({url:"/pages/center/login"}),e.next=9;break;case 4:return e.next=6,this.$u.api.starPostInfo({postId:this.postInfo.id,type:1});case 6:n=e.sent,n.isStar?t.showToast({title:"已收藏",duration:1e3}):t.showToast({title:"取消收藏",duration:1e3}),this.postInfo.isStar=n.isStar;case 9:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),tapComment:function(){this.isComments=!0},outComment:function(){this.isComments=!1,this.parent=0,this.placeholder="写点评论..."},bindInput:function(t){this.content=t.detail.value,this.count=this.content.length},addComment:function(){var e={};this.user?(e.id=this.id,e.parent=this.parent,e.content=this.content,0!==this.content.length||t.showModal({title:"温馨提示",content:"评论内容不能为空"})):t.showModal({title:"温馨提示",content:"必须登录才能发表评论, 是否前往登陆",success:function(e){e.confirm&&t.navigateTo({url:"/pages/center/login"})}})},showRecommend:function(){this.isNewest=!0,this.page=1,this.commentList=[]},showNewest:function(){this.isNewest=!1,this.page=1,this.commentList=[]}}};e.default=r}).call(this,n("543d")["default"])},b7ac:function(t,e,n){"use strict";(function(t){n("fef4");o(n("66fd"));var e=o(n("fc7f"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},f67d:function(t,e,n){"use strict";var o=n("5158"),i=n.n(o);i.a},fc7f:function(t,e,n){"use strict";n.r(e);var o=n("0233"),i=n("2838");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("f67d");var s,r=n("f0c5"),u=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"dfe2a662",null,!1,o["a"],s);e["default"]=u.exports}},[["b7ac","common/runtime","common/vendor"]]]);