(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/schedule/index"],{"1e47":function(t,e,n){"use strict";n.r(e);var u=n("dad7"),a=n("6e50");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("ca02"),n("d21b");var o,r=n("f0c5"),l=Object(r["a"])(a["default"],u["b"],u["c"],!1,null,"707d50ca",null,!1,u["a"],o);e["default"]=l.exports},"2ad8":function(t,e,n){},"46ef":function(t,e,n){},"6e50":function(t,e,n){"use strict";n.r(e);var u=n("a5bb"),a=n.n(u);for(var i in u)"default"!==i&&function(t){n.d(e,t,(function(){return u[t]}))}(i);e["default"]=a.a},a5bb:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,u,a,i,o){try{var r=t[i](o),l=r.value}catch(s){return void n(s)}r.done?e(l):Promise.resolve(l).then(u,a)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(u,a){var o=t.apply(e,n);function r(t){i(o,u,a,r,l,"next",t)}function l(t){i(o,u,a,r,l,"throw",t)}r(void 0)}))}}var r={data:function(){return{industry:0,attributes:0,follow:0,industryTitle:"行业类型",attributesTitle:"公司属性",followTitle:"是否关注",pH:0,navHeight:0,industryOptions:[],attributesOptions:[],followOptions:[],page:0,pageSize:5,total:0,list:[],loadingstatus:"loadmore"}},filters:{fliters_image:function(t){var e="https://fakeimg.pl/350x200/CFD8DC/000/?font=noto&text=";return t.length>e.length+2?t.substr(0,e.length+2):t}},onLoad:function(){var t=this;return o(u.default.mark((function e(){var n,a,i;return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$u.utils.isLogin()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$u.api.getDictionaryItem({code:"industry_type"});case 4:return n=e.sent,e.next=7,t.$u.api.getDictionaryItem({code:"company_attributes"});case 7:return a=e.sent,e.next=10,t.$u.api.getDictionaryItem({code:"isfollow_type"});case 10:return i=e.sent,t.industryOptions=n.list,t.attributesOptions=a.list,t.followOptions=i.list,t.industryOptions.unshift({label:"全部",value:0}),t.attributesOptions.unshift({label:"全部",value:0}),t.followOptions.unshift({label:"全部",value:0}),e.next=19,t.getSchedule();case 19:case"end":return e.stop()}}),e)})))()},methods:{goDetail:function(e){t.navigateTo({url:"/pages/schedule/details?id="+e})},reachBottom:function(){var t=this;return o(u.default.mark((function e(){return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("nomore"==t.loadingstatus){e.next=3;break}return e.next=3,t.getSchedule();case 3:case"end":return e.stop()}}),e)})))()},getSchedule:function(){var t=this;return o(u.default.mark((function e(){var n;return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.getRecruitInfoList({page:t.page+1,pageSize:5,industryType:t.industry,attribute:t.attributes,isFollow:t.follow});case 2:n=e.sent,t.page=n.pagination.currentPage,t.pageSize=n.pagination.perPageCount,t.total=n.pagination.total,t.list=t.list.concat(n.list),n.pagination.currentPage*n.pagination.perPageCount>=n.pagination.total&&(t.loadingstatus="nomore");case 8:case"end":return e.stop()}}),e)})))()},toUrl:function(t){this.$u.route(t)},industryChange:function(){var t=this;return o(u.default.mark((function e(){return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.industryOptions.forEach((function(e,n){0!=e.value?e.value!=t.industry||(t.industryTitle=e.label):t.industryTitle="行业类型"})),t.list=[],t.page=0,t.loadingstatus="loadmore",e.next=6,t.getSchedule();case 6:case"end":return e.stop()}}),e)})))()},attributesChange:function(){var t=this;return o(u.default.mark((function e(){return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.attributesOptions.forEach((function(e,n){0!=e.value?e.value!=t.attributes||(t.attributesTitle=e.label):t.attributesTitle="公司属性"})),t.page=0,t.list=[],t.loadingstatus="loadmore",e.next=6,t.getSchedule();case 6:case"end":return e.stop()}}),e)})))()},followChange:function(){var t=this;return o(u.default.mark((function e(){return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.followOptions.forEach((function(e,n){0!=e.value?e.value!=t.follow||(t.followTitle=e.label):t.followTitle="是否关注"})),t.page=0,t.list=[],t.loadingstatus="loadmore",e.next=6,t.getSchedule();case 6:case"end":return e.stop()}}),e)})))()},tapFollow:function(e,n){var a=this;return o(u.default.mark((function i(){var o;return u.default.wrap((function(u){while(1)switch(u.prev=u.next){case 0:return console.log(111),u.next=3,a.$u.api.followRecruitInfo({companyId:e});case 3:o=u.sent,o.isFollow?t.showToast({title:"关注成功",duration:1e3}):t.showToast({title:"取消关注",duration:1e3}),a.list[n].isFollow=o.isFollow;case 6:case"end":return u.stop()}}),i)})))()}},onReady:function(){var e=this;t.getSystemInfo({success:function(n){e._data.pH=n.windowHeight;var u=t.createSelectorQuery().select(".sv");u.boundingClientRect((function(t){var n=e._data.pH;e._data.navHeight=n-t.top})).exec()}})}};e.default=r}).call(this,n("543d")["default"])},ca02:function(t,e,n){"use strict";var u=n("2ad8"),a=n.n(u);a.a},d029:function(t,e,n){"use strict";(function(t){n("fef4");u(n("66fd"));var e=u(n("1e47"));function u(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},d21b:function(t,e,n){"use strict";var u=n("46ef"),a=n.n(u);a.a},dad7:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return u}));var u={uRow:function(){return n.e("uview-ui/components/u-row/u-row").then(n.bind(null,"9428"))},uDropdown:function(){return n.e("uview-ui/components/u-dropdown/u-dropdown").then(n.bind(null,"c720"))},uDropdownItem:function(){return n.e("uview-ui/components/u-dropdown-item/u-dropdown-item").then(n.bind(null,"54cd"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"d19b"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"49cd"))}},a=function(){var t=this,e=t.$createElement;t._self._c},i=[]}},[["d029","common/runtime","common/vendor"]]]);